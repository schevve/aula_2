<!DOCTYPE html>
<!--
    Template Thymeleaf para o formulário de cadastro/edição de alunos.

    Este mesmo formulário é reutilizado tanto para CRIAR quanto para EDITAR um aluno.
    Quando estamos editando, o objeto "aluno" já vem preenchido com os dados do banco.
    Quando estamos criando, o objeto "aluno" vem vazio (new Aluno()).
-->
<html xmlns:th="http://www.thymeleaf.org" lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Aluno</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>
<body>

<!-- Barra de navegação -->
<nav class="navbar navbar-dark bg-dark mb-4">
    <div class="container">
        <a class="navbar-brand" href="/alunos">Sistema de Cadastro de Alunos</a>
    </div>
</nav>

<div class="container">

    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <!--
                        Exibe "Editar Aluno" se o ID não for nulo (edição),
                        ou "Novo Aluno" se o ID for nulo (cadastro).
                    -->
                    <h4 th:text="${aluno.id != null} ? 'Editar Aluno' : 'Novo Aluno'">
                        Formulário
                    </h4>
                </div>
                <div class="card-body">

                    <!--
                        th:action="@{/alunos/salvar}" - Define a URL para onde o formulário será enviado.
                        th:object="${aluno}" - Vincula o formulário ao objeto Aluno do Model.
                        method="post" - Envia os dados via POST.
                    -->
                    <form th:action="@{/alunos/salvar}" th:object="${aluno}" method="post">

                        <!--
                            Campo hidden para o ID: quando estamos editando, o ID é enviado
                            junto com o formulário para que o JPA saiba que deve ATUALIZAR
                            e não criar um novo registro.
                        -->
                        <input type="hidden" th:field="*{id}">

                        <div class="mb-3">
                            <label for="nome" class="form-label">Nome Completo</label>
                            <!--
                                th:field="*{nome}" faz o binding bidirecional:
                                - Preenche o campo com o valor de aluno.nome
                                - Ao enviar, mapeia o valor digitado de volta para aluno.nome
                            -->
                            <input type="text" class="form-control" id="nome"
                                   th:field="*{nome}" placeholder="Ex: João da Silva" required>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">E-mail</label>
                            <input type="email" class="form-control" id="email"
                                   th:field="*{email}" placeholder="Ex: joao@email.com" required>
                        </div>

                        <div class="mb-3">
                            <label for="matricula" class="form-label">Matrícula</label>
                            <input type="text" class="form-control" id="matricula"
                                   th:field="*{matricula}" placeholder="Ex: 2025001" required>
                        </div>

                        <div class="mb-3">
                            <label for="curso" class="form-label">Curso</label>
                            <select class="form-select" id="curso" th:field="*{curso}" required>
                                <option value="">Selecione o curso...</option>
                                <option value="Engenharia de Software">Engenharia de Software</option>
                                <option value="Ciência da Computação">Ciência da Computação</option>
                                <option value="Sistemas de Informação">Sistemas de Informação</option>
                                <option value="Engenharia da Computação">Engenharia da Computação</option>
                                <option value="Análise e Desenvolvimento de Sistemas">Análise e Desenvolvimento de Sistemas</option>
                            </select>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-success">Salvar</button>
                            <!-- Link para voltar à lista sem salvar -->
                            <a th:href="@{/alunos}" class="btn btn-secondary">Cancelar</a>
                        </div>

                    </form>

                </div>
            </div>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
